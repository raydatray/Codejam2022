<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    //ask for name and pic
    //get session id (in a cookie)
    //send rest api name pic and session id
    //get a user id back
    //store the user id
  </head>

  <body>
    <div class="container-fluid p-5 bg-primary text-white text-center">
      <h1>McGym Buddy Finder</h1>
      <p>Looking for a workout buddy? This is the right place to be!</p>
    </div>
    <div class="container mt-5">
      <div class="row">
        <div class="col-sm-9">
          <h3>Put your workout time</h3>
          <p><span id = "Posts"></span></p>
        </div>
        <div class="col-sm-3">
          <h3>Chat</h3>
          <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p>
          <p>
            Does commiting work?!
          </p>
        </div>
      </div>
    </div>
  </body>
  <script>
    function initial_setup(event){
      event.preventDefault();
      const data = new FormData(event.target);
      const name = data.get('PLACEHOLDER');
      const pic = data.get('PLACEHOLDER');

    }

    function post_submit(event) {
      event.preventDefault();
      const data = new FormData(event.target);
      const time = data.get('PLACEHOLDER');
      const bodypart = data.get('PLACEHOLDER');

    }

    const gym_request = document.querySelector('PLACEHOLDER');
    //gym_request.addEventListener('submit', post_submit);



    async function post_fetcher() {
        let posts;
        const res = await fetch('api/get/listing/all')
        posts = await res.json();
        console.log(posts);

        let feed_container = document.getElementById("Posts");
        let numberOfPosts = posts.length;
        
        for (let i = 0; i<numberOfPosts; i++) {
          let post_div = document.createElement("div");
            post_div.setAttribute('align-item', 'center');

            let post_content = document.createElement("p");
              post_content.innerHTML = "User :" + posts[i].userName + " is going to Mcgym at " + posts[i].scheduleTime;

              let post_time = document.createElement("p");
                post_time.innerHTML = "Posted at :" + posts[i].createdTime;
          
          post_div.appendChild(post_content);
          post_div.append(post_time)
          feed_container.appendChild(post_div);
        }
      }
      post_fetcher();
  </script>
</html>